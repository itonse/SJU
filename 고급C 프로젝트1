#pragma warning (disable : 4996)
#include<stdio.h>
#include<string.h>

typedef struct {
	char name[21];   // 영문 대소문자로 이뤄짐,  이름은 중복 불가 (나머지는 가능)
	char phone[16];
	char birth[9];
}INFO;

void print_menu() {
	printf("*****Menu*****\n");
	printf("<1.Registration><2.ShowAll><3.Delete><4.FindByBirth><5.Exit>\n");
	printf("Enter_the_menu_number:");
}

int Registration(INFO *pa, int cnt) {
	int i, j;
	INFO tmp;

	if (cnt == 100) {
		printf("OVERFLOW\n");
		return cnt;
	}
	else {
		printf("Name:");
		scanf("%s", (pa + cnt)->name);
		getchar();
		printf("Phone_number:");
		scanf("%s", (pa + cnt)->phone);
		getchar();
		printf("Birth:");
		scanf("%s", (pa + cnt)->birth);
		getchar();

		printf("<<%d>>\n", cnt + 1);

		for (i = 0; i < cnt + 1; i++) {
			for (j = 0; j < cnt; j++) {
				if (strcmp(pa[j].name, pa[j + 1].name) > 0) {
					tmp = pa[j];
					pa[j] = pa[j + 1];
					pa[j + 1] = tmp;
				}
			}
		}
		return ++cnt;
	}
}

void ShowAll(INFO *pa, int cnt) {
	int i;

	if (cnt > 0) {
		for (i = 0; i < cnt; i++)
			printf("%s %s %s\n", (pa + i)->name, (pa + i)->phone, (pa + i)->birth);
	}
}

int Delete(INFO *pa, int cnt) {
	char ch[21];
	int i, flag = 0, pos;

	if (cnt == 0) {
		printf("NO MEMBER\n");
		return cnt;
	}
	else {
		printf("Name:");
		scanf("%s", ch);
		getchar();

		for (i = 0; i < cnt; i++) {
			if (strcmp(pa[i].name, ch) == 0) {
				flag = 1;
				pos = i;
				break;
			}
		}

		if (flag == 1) {
			for (i = pos + 1; i < cnt; i++) {
				strcpy(pa[i - 1].name, pa[i].name);
				strcpy(pa[i - 1].phone, pa[i].phone);
				strcpy(pa[i - 1].birth, pa[i].birth);
			}
			*pa[cnt - 1].name = NULL;
			*pa[cnt - 1].phone = NULL;
			*pa[cnt - 1].birth = NULL;
		}
		return --cnt;
	}
}

void FindByBirth(INFO *pa, int cnt) {
	int i, month, tmp = 0;

	printf("Birth:");
	scanf("%d", &month);

	for (i = 0; i < cnt; i++) {
		tmp = ((pa + i)->birth[4] - '0') * 10 + (pa + i)->birth[5] - '0';
		if (tmp == month)
			printf("%s %s %s\n", (pa + i)->name, (pa + i)->phone, (pa + i)->birth);
	}
}

int main() {
	INFO a[100];
	INFO *pa = a;
	int cnt = 0, select;

	while (1) {
		print_menu();
		scanf("%d", &select);
		getchar();

		switch (select) {
			case 1:
				cnt = Registration(a, cnt);
				break;
			case 2:
				ShowAll(a, cnt);
				break;
			case 3:
				cnt = Delete(a, cnt);
				break;
			case 4:
				FindByBirth(a, cnt);
				break;
			case 5:
				return 0;
		}
	}

	return 0;
}
